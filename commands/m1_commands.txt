# Make a copy of the base_app folder

## PowerShell
Copy-Item -Recurse -Path .\base_app -Destination .\nacho_brigade

## Bash
cp -r base_app nacho_brigade

# Change directory to the new folder
cd nacho_brigade

# Initialize Terraform
terraform init

# Plan the infrastructure changes
terraform plan -out="m1.tfplan"

# Apply the planned changes
terraform apply "m1.tfplan"

# Try to apply the same plan again to see the error
terraform apply "m1.tfplan"

# Create a new plan
terraform plan -out="m1-new.tfplan"

# Create a workspace called dev
terraform workspace new dev

# Deploy the infrastructure in the new workspace
terraform apply

# Try to apply the default workspace plan in the new workspace
terraform apply "m1-new.tfplan"

# Destroy the infrastructure in the dev workspace
terraform destroy

# Switch back to the default workspace
terraform workspace select default

# Delete the dev workspace
terraform workspace delete dev

# Destroy the infrastructure if needed
terraform destroy